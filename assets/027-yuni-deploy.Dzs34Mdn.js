import{_ as E}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CF3jKIAV.js";import{d as c,a as g,u}from"./chunks/vue-router.0fijYp3S.js";import{a2 as y,a3 as a,a4 as n,a5 as i,a6 as s,B as m,a1 as b,D as f}from"./framework.CL_twgqk.js";import"./app.DJJRq6_7.js";import"./chunks/dayjs.BFInjCTz.js";import"./chunks/vue-i18n.CRimy4L_.js";import"./chunks/pinia.KHo6empO.js";/* empty css                    */import"./chunks/@vueuse/motion.DON3upiQ.js";import"./chunks/nprogress.DUFFUuWH.js";import"./YunComment.vue_vue_type_style_index_0_lang.lpZGJo7w.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.7-8ddEp8.js";import"./post.D4SLBNdn.js";const A=c("/posts/027-yuni-deploy",async e=>JSON.parse('{"title":"Yuni3 机器人部署备忘录","titleTemplate":"%s - yuier","description":"","frontmatter":{"title":"Yuni3 机器人部署备忘录","titleTemplate":"%s - yuier","date":"2026-01-08 00:10:59","updated":"2026-01-08 00:10:59","author":"yuier","categories":["qq机器人"],"tags":["qq机器人"],"cover":null,"hide":"index"},"headers":[],"relativePath":"pages/posts/027-yuni-deploy.md","lastUpdated":1772277401000}'),{lazy:(e,t)=>e.name===t.name}),_={__name:"027-yuni-deploy",setup(e,{expose:t}){const{data:r}=A(),k=u(),o=g(),h=Object.assign(o.meta.frontmatter||{},r.value?.frontmatter||{});return k.currentRoute.value.data=r.value,f("valaxy:frontmatter",h),globalThis.$frontmatter=h,t({frontmatter:{title:"Yuni3 机器人部署备忘录",titleTemplate:"%s - yuier",date:"2026-01-08 00:10:59",updated:"2026-01-08 00:10:59",author:"yuier",categories:["qq机器人"],tags:["qq机器人"],cover:null,hide:"index"}}),(l,p)=>{const d=E;return b(),y(d,{frontmatter:m(h)},{"main-content-md":a(()=>[...p[0]||(p[0]=[i("h2",{id:"onebot-前端",tabindex:"-1"},[s("OneBot 前端 "),i("a",{class:"header-anchor",href:"#onebot-前端","aria-label":'Permalink to "OneBot 前端"'},"​")],-1),i("p",null,"使用 NapCat 作为前端",-1),i("p",null,[s("部署过程参考 "),i("a",{href:"https://napneko.github.io/guide/install",target:"_blank",rel:"noreferrer"},"安装 NapCat")],-1),i("p",null,"我使用的是 Docker 方式部署",-1),i("p",null,[i("a",{href:"https://github.com/NapNeko/NapCat-Docker",target:"_blank",rel:"noreferrer"},"https://github.com/NapNeko/NapCat-Docker")],-1),i("h3",{id:"配置",tabindex:"-1"},[s("配置 "),i("a",{class:"header-anchor",href:"#配置","aria-label":'Permalink to "配置"'},"​")],-1),i("p",null,"起一个 ws 服务器",-1),i("figure",null,[i("img",{src:"https://s2.loli.net/2026/01/08/VbgWkyJAjHRGcUp.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1),i("h2",{id:"基础设施",tabindex:"-1"},[s("基础设施 "),i("a",{class:"header-anchor",href:"#基础设施","aria-label":'Permalink to "基础设施"'},"​")],-1),i("blockquote",null,[i("p",null,[s("应用根目录为 "),i("code",null,"srv/bot/yuni")])],-1),i("h3",{id:"数据库",tabindex:"-1"},[s("数据库 "),i("a",{class:"header-anchor",href:"#数据库","aria-label":'Permalink to "数据库"'},"​")],-1),i("p",null,"为了方便，我使用的是 SQLite 数据库",-1),i("p",null,[s("本地已经有开发过程中产生的 SQLite 数据库文件了，直接上传到应用根目录的 "),i("code",null,"data"),s(" 目录下")],-1),i("h3",{id:"redis",tabindex:"-1"},[s("redis "),i("a",{class:"header-anchor",href:"#redis","aria-label":'Permalink to "redis"'},"​")],-1),i("p",null,"也是在服务器上搭建的 redis 服务",-1),i("h2",{id:"业务适配",tabindex:"-1"},[s("业务适配 "),i("a",{class:"header-anchor",href:"#业务适配","aria-label":'Permalink to "业务适配"'},"​")],-1),i("h3",{id:"应用构建",tabindex:"-1"},[s("应用构建 "),i("a",{class:"header-anchor",href:"#应用构建","aria-label":'Permalink to "应用构建"'},"​")],-1),i("p",null,[s("在启动类 "),i("code",null,"yuni-application"),s(" 的 "),i("code",null,"pom.xml"),s(" 中添加 "),i("code",null,"<build>"),s(" 配置")],-1),i("div",{class:"language-xml max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"xml"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"<!-- SpringBoot打包插件（生成可执行Jar） -->")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"build"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"plugins"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"plugin"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"groupId"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">org.springframework.boot</"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"groupId"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"artifactId"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">spring-boot-maven-plugin</"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"artifactId"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"executions"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"execution"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"goals"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                        <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"goal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">repackage</"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"goal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"goals"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"execution"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"executions"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"plugin"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"plugins"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    <!-- 自定义Jar包名称（简化部署） -->")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"finalName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">yuni-app</"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"finalName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"</"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"build"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"应用 jar 包本地构建，然后上传到应用根目录下",-1),i("h3",{id:"插件",tabindex:"-1"},[s("插件 "),i("a",{class:"header-anchor",href:"#插件","aria-label":'Permalink to "插件"'},"​")],-1),i("p",null,[s("插件 jar 包上传到应用根目录的 "),i("code",null,"plugins"),s(" 目录下")],-1),i("h3",{id:"生产配置",tabindex:"-1"},[s("生产配置 "),i("a",{class:"header-anchor",href:"#生产配置","aria-label":'Permalink to "生产配置"'},"​")],-1),i("p",null,[s("在应用根目录的 "),i("code",null,"config/application-prod.yml"),s(" 中编写生产配置")],-1),i("p",null,"注意要在配置中显式标明这是生产配置",-1),i("div",{class:"language-yml max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"yml"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"spring"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"    activate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"      on-profile"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"prod")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h3",{id:"最终部署目录结构",tabindex:"-1"},[s("最终部署目录结构 "),i("a",{class:"header-anchor",href:"#最终部署目录结构","aria-label":'Permalink to "最终部署目录结构"'},"​")],-1),i("div",{class:"language- max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"}),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,".")]),s(`
`),i("span",{class:"line"},[i("span",null,"├── config")]),s(`
`),i("span",{class:"line"},[i("span",null,"│   └── application-prod.yml")]),s(`
`),i("span",{class:"line"},[i("span",null,"├── data")]),s(`
`),i("span",{class:"line"},[i("span",null,"│   └── yuni3.db")]),s(`
`),i("span",{class:"line"},[i("span",null,"├── logs")]),s(`
`),i("span",{class:"line"},[i("span",null,"│   ├── 略")]),s(`
`),i("span",{class:"line"},[i("span",null,"├── plugins")]),s(`
`),i("span",{class:"line"},[i("span",null,"│   ├── daily-news-0.0.1-SNAPSHOT.jar")]),s(`
`),i("span",{class:"line"},[i("span",null,"│   ├── event-manage-0.0.1-SNAPSHOT.jar")]),s(`
`),i("span",{class:"line"},[i("span",null,"│   ├── example-0.0.1-SNAPSHOT.jar")]),s(`
`),i("span",{class:"line"},[i("span",null,"│   ├── maimai-0.0.1-SNAPSHOT.jar")]),s(`
`),i("span",{class:"line"},[i("span",null,"│   └── plugin-manage-0.0.1-SNAPSHOT.jar")]),s(`
`),i("span",{class:"line"},[i("span",null,"├── start_yuni.sh")]),s(`
`),i("span",{class:"line"},[i("span",null,"└── yuni-app.jar")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h2",{id:"启动脚本",tabindex:"-1"},[s("启动脚本 "),i("a",{class:"header-anchor",href:"#启动脚本","aria-label":'Permalink to "启动脚本"'},"​")],-1),i("p",null,"简单在根目录下写了个启动脚本",-1),i("div",{class:"language-bash max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# start_yuni.sh")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 执行 jar 包为 yuni-app.jar")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 指定应用的配置为 prod 配置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 引入外部配置 ./config/application-prod.yml")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"java"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -jar"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," yuni-app.jar"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"--spring.profiles.active=prod "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"\\")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"--spring.config.location=./config/application-prod.yml")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"我使用 screen 执行脚本",-1),i("figure",null,[i("img",{src:"https://s2.loli.net/2026/01/08/NLK2H57fOSviAGY.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1),i("h2",{id:"补充-麦麦",tabindex:"-1"},[s("补充：麦麦 "),i("a",{class:"header-anchor",href:"#补充-麦麦","aria-label":'Permalink to "补充：麦麦"'},"​")],-1),i("p",null,"我的 Yuni 做了一个麦麦的适配，因此需要再启动一个麦麦机器人",-1),i("p",null,[s("麦麦本体部署参考: "),i("a",{href:"https://docs.mai-mai.org/manual/deployment/",target:"_blank",rel:"noreferrer"},"MaiBot 部署指南")],-1),i("p",null,"我的适配插件模拟 NapCat 前端与麦麦进行交互，所以麦麦那边使用 NapCat 适配器",-1),i("p",null,[s("麦麦-NapCat 适配器: "),i("a",{href:"https://docs.mai-mai.org/manual/adapters/napcat.html",target:"_blank",rel:"noreferrer"},"MaiBot Napcat Adapter")],-1)])]),"main-header":a(()=>[n(l.$slots,"main-header")]),"main-header-after":a(()=>[n(l.$slots,"main-header-after")]),"main-nav":a(()=>[n(l.$slots,"main-nav")]),"main-content-before":a(()=>[n(l.$slots,"main-content-before")]),"main-content":a(()=>[n(l.$slots,"main-content")]),"main-content-after":a(()=>[n(l.$slots,"main-content-after")]),"main-nav-before":a(()=>[n(l.$slots,"main-nav-before")]),"main-nav-after":a(()=>[n(l.$slots,"main-nav-after")]),comment:a(()=>[n(l.$slots,"comment")]),footer:a(()=>[n(l.$slots,"footer")]),aside:a(()=>[n(l.$slots,"aside")]),"aside-custom":a(()=>[n(l.$slots,"aside-custom")]),default:a(()=>[n(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{_ as default,A as usePageData};
