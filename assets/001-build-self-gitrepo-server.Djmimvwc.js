import{_ as F}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CF3jKIAV.js";import{d as g,a as y,u as m}from"./chunks/vue-router.0fijYp3S.js";import{a2 as c,a3 as a,a4 as t,a5 as s,a6 as i,a7 as u,B as C,a1 as B,D as A}from"./framework.CL_twgqk.js";import"./app.DJJRq6_7.js";import"./chunks/dayjs.BFInjCTz.js";import"./chunks/vue-i18n.CRimy4L_.js";import"./chunks/pinia.KHo6empO.js";/* empty css                    */import"./chunks/@vueuse/motion.DON3upiQ.js";import"./chunks/nprogress.DUFFUuWH.js";import"./YunComment.vue_vue_type_style_index_0_lang.lpZGJo7w.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.7-8ddEp8.js";import"./post.D4SLBNdn.js";const D=g("/posts/001-build-self-gitrepo-server",async e=>JSON.parse('{"title":"搭建自己的 git 远程仓库服务","titleTemplate":"%s - yuier","description":"","frontmatter":{"title":"搭建自己的 git 远程仓库服务","titleTemplate":"%s - yuier","date":"2025-03-09 01:19:12","updated":"2025-03-09 01:19:12","author":"yuier","cover":null},"headers":[],"relativePath":"pages/posts/001-build-self-gitrepo-server.md","lastUpdated":1772277401000}'),{lazy:(e,h)=>e.name===h.name}),S={__name:"001-build-self-gitrepo-server",setup(e,{expose:h}){const{data:r}=D(),p=m(),o=y(),k=Object.assign(o.meta.frontmatter||{},r.value?.frontmatter||{});return p.currentRoute.value.data=r.value,A("valaxy:frontmatter",k),globalThis.$frontmatter=k,h({frontmatter:{title:"搭建自己的 git 远程仓库服务",titleTemplate:"%s - yuier",date:"2025-03-09 01:19:12",updated:"2025-03-09 01:19:12",author:"yuier",cover:null}}),(l,n)=>{const d=F;return B(),c(d,{frontmatter:C(k)},{"main-content-md":a(()=>[n[0]||(n[0]=s("h2",{id:"流程简述",tabindex:"-1"},[i("流程简述 "),s("a",{class:"header-anchor",href:"#流程简述","aria-label":'Permalink to "流程简述"'},"​")],-1)),n[1]||(n[1]=s("p",null,"假设我们已经拥有了一台 Linux 服务器，并且服务器上安装好了 git，并且已经比较熟悉 Linux 与 git 的常用操作",-1)),n[2]||(n[2]=s("ul",null,[s("li",null,[s("p",null,[i("创建 git 用户，用于管理 git 仓库 —— 这样我们的仓库地址就会是 "),s("code",null,"git@your-site.com:/xxx/yyy/zzz.git")])]),s("li",null,[s("p",null,"配置 ssh 免密登录，这样每次拉取/推送代码时不必输入 git 用户的密码")]),s("li",null,[s("p",null,"创建仓库并拉取")]),s("li",null,[s("p",null,"大功告成！")])],-1)),u(" more "),n[3]||(n[3]=s("h2",{id:"实操",tabindex:"-1"},[i("实操 "),s("a",{class:"header-anchor",href:"#实操","aria-label":'Permalink to "实操"'},"​")],-1)),n[4]||(n[4]=s("div",{class:"language-bash max-h-900px"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 在 root 权限下创建")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 需要设置 git 账户密码")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," useradd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," git")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 创建完成后 /home 路径下会创建 git 目录，可以查看一下")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ll"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /home/")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 进入 git 目录，配置免密登录")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /home/git")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 这里需要切换到 git 用户")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"su"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," git")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mkdir"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .ssh")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .ssh")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# authorized_keys 文件用于保存用户公钥，将本地 PC 生成的公钥粘进去。")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 如果有多个用户，每行一个公钥即可")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vim"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," authorized_keys")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 设置权限")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 如果这里无法执行 sudo 命令，提示 git is not in the sudoers file，")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 切到 root 用户，修改 /etc/sudoers 文件，在文件末尾加上一行下述内容：")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# git ALL=(ALL:ALL) ALL")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 文件所有者有读、写、执行权限，同组、其他用户均无任何权限")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," chmod"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -R"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 700"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /home/git/.ssh")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 文件所有者拥有读写权限，同组、其他用户均无任何权限")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," chmod"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 600"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /home/git/.ssh/authorized_keys")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 在廖雪峰的教程中，还有一步限制 git 用户通过 shell 登录，但是我自己没有这个需求，所以没有这么做")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 需要的可以参考 https://liaoxuefeng.com/books/git/customize/server/index.html - 第五步，禁用shell登录")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 回到 git 用户目录，建立一个 repos 目录用于储存各个仓库")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /home/git")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mkdir"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," repos")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 创建测试仓库")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," repos")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 创建一个空仓库")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," init"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --bare"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," sample.git")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 这一步将会在当前目录下创建一个 sample.git 目录，其结构如下。这就是我们的 git 远程仓库了")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    repos")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        └──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," sample.git")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            ├──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," branches")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            ├──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," config")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            ├──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," description")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            ├──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," HEAD")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            ├──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," hooks")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            ├──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," info")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            ├──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," objects")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            └──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," refs")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 本地可以正常拉取、修改、推送仓库了")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," clone"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," git@your-site.com:/home/git/repos/sample.git")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 拉下来的就是熟悉的 git 本地仓库形态")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    sample")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        └──"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .git")])])]),s("button",{class:"code-block-unfold-btn"})],-1))]),"main-header":a(()=>[t(l.$slots,"main-header")]),"main-header-after":a(()=>[t(l.$slots,"main-header-after")]),"main-nav":a(()=>[t(l.$slots,"main-nav")]),"main-content-before":a(()=>[t(l.$slots,"main-content-before")]),"main-content":a(()=>[t(l.$slots,"main-content")]),"main-content-after":a(()=>[t(l.$slots,"main-content-after")]),"main-nav-before":a(()=>[t(l.$slots,"main-nav-before")]),"main-nav-after":a(()=>[t(l.$slots,"main-nav-after")]),comment:a(()=>[t(l.$slots,"comment")]),footer:a(()=>[t(l.$slots,"footer")]),aside:a(()=>[t(l.$slots,"aside")]),"aside-custom":a(()=>[t(l.$slots,"aside-custom")]),default:a(()=>[t(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{S as default,D as usePageData};
