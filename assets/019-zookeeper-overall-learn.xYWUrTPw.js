import{_ as y}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CF3jKIAV.js";import{_ as C}from"./ValaxyMermaid.vue_vue_type_script_setup_true_lang.CwKS2sag.js";import{d as A,a as F,u as D}from"./chunks/vue-router.0fijYp3S.js";import{a2 as m,a3 as a,a4 as t,a5 as i,a6 as s,P as d,a8 as p,B as I,a1 as b,D as B}from"./framework.CL_twgqk.js";import"./app.DJJRq6_7.js";import"./chunks/dayjs.BFInjCTz.js";import"./chunks/vue-i18n.CRimy4L_.js";import"./chunks/pinia.KHo6empO.js";/* empty css                    */import"./chunks/@vueuse/motion.DON3upiQ.js";import"./chunks/nprogress.DUFFUuWH.js";import"./YunComment.vue_vue_type_style_index_0_lang.lpZGJo7w.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.7-8ddEp8.js";import"./post.D4SLBNdn.js";const Z=A("/posts/019-zookeeper-overall-learn",async e=>JSON.parse('{"title":"zookeeper 整体架构和功能特性","titleTemplate":"%s - yuier","description":"","frontmatter":{"title":"zookeeper 整体架构和功能特性","titleTemplate":"%s - yuier","date":"2025-12-17 18:58:59","updated":"2025-12-17 18:58:59","author":"yuier","categories":["zookeeper"],"tags":["zookeeper","分布式","八股文"],"cover":null,"hide":"index"},"headers":[],"relativePath":"pages/posts/019-zookeeper-overall-learn.md","lastUpdated":1772277401000}'),{lazy:(e,k)=>e.name===k.name}),O={__name:"019-zookeeper-overall-learn",setup(e,{expose:k}){const{data:E}=Z(),g=D(),u=F(),h=Object.assign(u.meta.frontmatter||{},E.value?.frontmatter||{});return g.currentRoute.value.data=E.value,B("valaxy:frontmatter",h),globalThis.$frontmatter=h,k({frontmatter:{title:"zookeeper 整体架构和功能特性",titleTemplate:"%s - yuier",date:"2025-12-17 18:58:59",updated:"2025-12-17 18:58:59",author:"yuier",categories:["zookeeper"],tags:["zookeeper","分布式","八股文"],cover:null,hide:"index"}}),(n,l)=>{const r=C,o=y;return b(),m(o,{frontmatter:I(h)},{"main-content-md":a(()=>[l[0]||(l[0]=i("h2",{id:"zookeeper-是干啥的",tabindex:"-1"},[s("zookeeper 是干啥的 "),i("a",{class:"header-anchor",href:"#zookeeper-是干啥的","aria-label":'Permalink to "zookeeper 是干啥的"'},"​")],-1)),l[1]||(l[1]=i("p",null,"简单描述：分布式系统里，各业务微服务以 client 的身份连接 zookeeper 的 server ，实现相互协作（配置分发、服务注册与发现等）",-1)),l[2]||(l[2]=i("h2",{id:"分布式系统的核心问题",tabindex:"-1"},[s("分布式系统的核心问题 "),i("a",{class:"header-anchor",href:"#分布式系统的核心问题","aria-label":'Permalink to "分布式系统的核心问题"'},"​")],-1)),l[3]||(l[3]=i("ul",null,[i("li",null,[i("p",null,"如何在多个节点之间一致地管理和分发配置信息：配置管理")]),i("li",null,[i("p",null,"如何为分布式系统中的各个组件提供统一的命名和地址解析：命名服务")]),i("li",null,[i("p",null,"如何在多个节点之间实现互斥访问，避免资源竞争：分布式锁")]),i("li",null,[i("p",null,"如何在分布式系统中选举领导者，协调和管理各个节点的工作：领导选举")]),i("li",null,[i("p",null,"如何监控和管理集群中节点的健康状态，确保系统的高可用性：集群管理")])],-1)),l[4]||(l[4]=i("figure",null,[i("img",{src:"https://s2.loli.net/2025/12/11/HQN8reVcOdhbvYy.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),l[5]||(l[5]=i("h2",{id:"分布式协调机制",tabindex:"-1"},[s("分布式协调机制 "),i("a",{class:"header-anchor",href:"#分布式协调机制","aria-label":'Permalink to "分布式协调机制"'},"​")],-1)),l[6]||(l[6]=i("p",null,"分布式协调是指在分布式系统中，多个节点通过网络协同工作，以完成共同任务、保持一致性并避免冲突的一系列机制和技术。",-1)),l[7]||(l[7]=i("p",null,"常见的分布式协调机制包括同步访问共享资源（分布式锁）、保持数据一致性（配置同步、分布式事务）、实现高可用（主节点选举、故障转移）、动态感知节点变化（服务注册与发现）等",-1)),l[8]||(l[8]=i("p",null,"Zookeeper 提供分布式锁、配置管理、Leader 选举等功能，基于 ZAB 协议实现一致性",-1)),l[9]||(l[9]=i("ul",null,[i("li",null,[i("p",null,"高可用"),i("p",null,"复制机制确保节点故障时仍能继续提供服务")]),i("li",null,[i("p",null,"一致性"),i("p",null,"强一致性模型，确保集群上的所有节点数据一致")]),i("li",null,[i("p",null,"简洁性"),i("p",null,"简单的编程接口和数据模型，方便开发者使用")]),i("li",null,[i("p",null,"高效性"),i("p",null,"读操作上提供高吞吐量和低延迟")])],-1)),l[10]||(l[10]=i("h2",{id:"文件系统",tabindex:"-1"},[s("文件系统 "),i("a",{class:"header-anchor",href:"#文件系统","aria-label":'Permalink to "文件系统"'},"​")],-1)),l[11]||(l[11]=i("p",null,"Zookeeper 提供基于目录节点(Znode)树方式的数据存储，以及一些额外的抽象操作，如排序、通知、监控等",-1)),l[12]||(l[12]=i("figure",null,[i("img",{src:"https://s2.loli.net/2025/12/11/72qN3CQTDFKg4j5.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),l[13]||(l[13]=i("figure",null,[i("img",{src:"https://s2.loli.net/2025/12/11/D8P9xYwrMFn5oKp.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),l[14]||(l[14]=i("ul",null,[i("li",null,[i("p",null,"持久节点（Persistent ZNode）: ⼀旦创建，除⾮显式删除，否则将⼀直存在")]),i("li",null,[i("p",null,"临时节点（Ephemeral ZNode）: 与客⼾端会话相关联，会话结束时⾃动删除")]),i("li",null,[i("p",null,"有序节点（Sequential ZNode）: 创建时分配⼀个唯⼀的递增序号")])],-1)),l[15]||(l[15]=i("h2",{id:"zookeeper-功能",tabindex:"-1"},[s("Zookeeper 功能 "),i("a",{class:"header-anchor",href:"#zookeeper-功能","aria-label":'Permalink to "Zookeeper 功能"'},"​")],-1)),l[16]||(l[16]=i("ul",null,[i("li",null,[i("p",null,"模型"),i("ul",null,[i("li",null,[i("p",null,"ACL")]),i("li",null,[i("p",null,"监听器")]),i("li",null,[i("p",null,"绘画")])])]),i("li",null,[i("p",null,"实现"),i("ul",null,[i("li",null,[i("p",null,"Zxid")]),i("li",null,[i("p",null,"角色")]),i("li",null,[i("p",null,"Zab 协议")])])]),i("li",null,[i("p",null,"操作"),i("ul",null,[i("li",null,[i("p",null,"事件和监听器")]),i("li",null,[i("p",null,"原生 API")])])])],-1)),l[17]||(l[17]=i("h2",{id:"模型",tabindex:"-1"},[s("模型 "),i("a",{class:"header-anchor",href:"#模型","aria-label":'Permalink to "模型"'},"​")],-1)),l[18]||(l[18]=i("h3",{id:"基本特性",tabindex:"-1"},[s("基本特性 "),i("a",{class:"header-anchor",href:"#基本特性","aria-label":'Permalink to "基本特性"'},"​")],-1)),l[19]||(l[19]=i("figure",null,[i("img",{src:"https://s2.loli.net/2025/12/11/vaQHuFJi9xlzty6.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),l[20]||(l[20]=i("ul",null,[i("li",null,[i("p",null,"原子性"),i("p",null,"所有请求的处理结果在整个 Zookeeper 集群中的所有机器是一致的")]),i("li",null,[i("p",null,"顺序性"),i("p",null,"从同意客户端发起的事务请求，会按照其发起顺序严格地应用到 Zookeeper 中")])],-1)),l[21]||(l[21]=i("h3",{id:"acl",tabindex:"-1"},[s("ACL "),i("a",{class:"header-anchor",href:"#acl","aria-label":'Permalink to "ACL"'},"​")],-1)),l[22]||(l[22]=i("p",null,"关联 ACL (Access Control List)",-1)),l[23]||(l[23]=i("p",null,"用于控制节点访问权限的机制，定义了哪些用户或组可以对特定 Znode 执行哪些操作",-1)),l[24]||(l[24]=i("ul",null,[i("li",null,[i("p",null,"scheme ：认证模式，定义如何验证用户身份。包括 auth 、digest 、 ip 、 super 等类型")]),i("li",null,[i("p",null,"id ：身份标识，根据 scheme 不同有不同的格式")]),i("li",null,[i("p",null,"permissions ：权限集合，定义允许的操作，包括 crwda 五大权限")])],-1)),l[25]||(l[25]=i("h3",{id:"监听器",tabindex:"-1"},[s("监听器 "),i("a",{class:"header-anchor",href:"#监听器","aria-label":'Permalink to "监听器"'},"​")],-1)),l[26]||(l[26]=i("p",null,"本质是一种分布式回调",-1)),l[27]||(l[27]=i("figure",null,[i("img",{src:"https://s2.loli.net/2025/12/11/duZVMiDtPsoz81B.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),l[28]||(l[28]=i("p",null,"客户端关注的 Znode 发生变化后，消息通过会话传回客户端，客户端的消息处理函数得到调用",-1)),l[29]||(l[29]=i("h3",{id:"会话",tabindex:"-1"},[s("会话 "),i("a",{class:"header-anchor",href:"#会话","aria-label":'Permalink to "会话"'},"​")],-1)),l[30]||(l[30]=i("p",null,"每个客户端连接 Zookeeper 时，都会创建一个会话(sessionId)，并分配一个超时时间(sessionTimeout)",-1)),l[31]||(l[31]=i("p",null,"会话状态（如临时节点、监听器）会被服务端持久化储存。这是 Zookeeper 管理客户端状态的核心单元",-1)),d(r,p({code:"c2VxdWVuY2VEaWFncmFtCiAgICBwYXJ0aWNpcGFudCBDbGllbnQKICAgIHBhcnRpY2lwYW50IFNlcnZlcgoKICAgIENsaWVudC0-PlNlcnZlcjog5bu656uL6L-e5o6lIChDT05ORUNUSU5HKQogICAgU2VydmVyLS0-PkNsaWVudDog5YiG6YWNIHNlc3Npb25JRCArIHRpbWVvdXQgKENPTk5FQ1RFRCkKCiAgICBsb29wIOW_g-i3s-WRqOacnwogICAgICAgIENsaWVudC0-PlNlcnZlcjog5Y-R6YCBIFBJTkcg6K-35rGCCiAgICAgICAgU2VydmVyLS0-PkNsaWVudDog6L-U5ZueIFBJTkcg5ZON5bqUCiAgICBlbmQKCiAgICBub3RlIG92ZXIgQ2xpZW50LCBTZXJ2ZXI6IOe9kee7nOS4reaWrS4uLgogICAgCiAgICBTZXJ2ZXItPj5TZXJ2ZXI6IOW8gOWni-S8muivneWAkuiuoeaXtgoKICAgIGFsdCDotoXml7bliY3mgaLlpI0KICAgICAgICBDbGllbnQtPj5TZXJ2ZXI6IOmHjeaWsOWPkemAgSBQSU5HCiAgICAgICAgU2VydmVyLS0-PkNsaWVudDog56Gu6K6k5Lya6K-d5pyJ5pWICiAgICBlbHNlIOi2heaXtuacquaBouWkjQogICAgICAgIFNlcnZlci0-PlNlcnZlcjog5qCH6K6w5Lya6K-d6L-H5pyfCiAgICAgICAgU2VydmVyLT4-U2VydmVyOiDliKDpmaTkuLTml7boioLngrkKICAgICAgICBTZXJ2ZXItLT4-Q2xpZW50OiDlhbPpl63ov57mjqUgKOS4i-asoeaTjeS9nOinpuWPkSBOT1RfQ09OTkVDVEVEKQogICAgZW5k"},{}),null,16),l[32]||(l[32]=i("p",null,"即使客户端断开连接，只要会话未超时，服务端仍会保留会话关联的数据",-1)),l[33]||(l[33]=i("p",null,"客户端重连后，会复用原会话（sessionId, sessionPasswd），无需重新创建",-1)),l[34]||(l[34]=i("hr",null,null,-1)),l[35]||(l[35]=i("p",null,"短暂性会话与持久性会话",-1)),l[36]||(l[36]=i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"特性"),i("th",null,"短暂性会话（Ephemeral Session）"),i("th",null,"持久性会话（Persistent Session）")])]),i("tbody",null,[i("tr",null,[i("td",null,"客户端行为"),i("td",null,"短暂连接，操作完成后立即断开"),i("td",null,"长期保持连接（如服务注册中心）")]),i("tr",null,[i("td",null,"临时节点生命周期"),i("td",null,"客户端断开即消失（会话超时前）"),i("td",null,"即使短暂断开，仍通过重连保持会话")]),i("tr",null,[i("td",null,"典型场景"),i("td",null,"分布式锁、Leader选举"),i("td",null,"服务注册发现、配置中心")]),i("tr",null,[i("td",null,"资源消耗"),i("td",null,"较低（快速释放会话资源）"),i("td",null,"较高（需维持心跳）")]),i("tr",null,[i("td",null,"容错设计"),i("td",null,"依赖会话超时触发清理逻辑"),i("td",null,"依赖客户端重连机制")])])],-1)),l[37]||(l[37]=i("h2",{id:"操作",tabindex:"-1"},[s("操作 "),i("a",{class:"header-anchor",href:"#操作","aria-label":'Permalink to "操作"'},"​")],-1)),l[38]||(l[38]=i("h3",{id:"常用操作",tabindex:"-1"},[s("常用操作 "),i("a",{class:"header-anchor",href:"#常用操作","aria-label":'Permalink to "常用操作"'},"​")],-1)),l[39]||(l[39]=i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"操作"),i("th",null,"描述"),i("th",null,"类型")])]),i("tbody",null,[i("tr",null,[i("td",null,"create"),i("td",null,[s("在指定路径创建一个 ZNode 。可设置节点类型（持久/临时/顺序）、ACL 列表和初始数据。"),i("br"),s("若父节点不存在或 ACL无权限会抛出异常")]),i("td",null,"write")]),i("tr",null,[i("td",null,"delete"),i("td",null,[s("删除指定路径的 ZNode ，可指定版本号。"),i("br"),s("若节点不存在、有子节点或版本不匹配会抛出异常")]),i("td",null,"write")]),i("tr",null,[i("td",null,"exists"),i("td",null,[s("检查节点是否存在，返回节点的数据结构（含元数据，如版本号、时间戳）"),i("br"),s("可设置 watcher 监听节点创建/删除/数据变更事件")]),i("td",null,"read")]),i("tr",null,[i("td",null,"getChildren"),i("td",null,[s("获取指定节点的所有子节点名称列表（仅名称，不含路径）"),i("br"),s("可设置 watcher 监听节点增删事件")]),i("td",null,"read")]),i("tr",null,[i("td",null,"getData"),i("td",null,[s("读取节点的数据内容和元数据"),i("br"),s("可设置 watcher 监听数据变更或节点删除事件")]),i("td",null,"read")]),i("tr",null,[i("td",null,"setData"),i("td",null,[s("更新节点的数据内容"),i("br"),s("需指定新数据和预期版本号。若版本不匹配会抛出异常")]),i("td",null,"write")]),i("tr",null,[i("td",null,"getACL"),i("td",null,"获取节点的 ACL 和数据信息"),i("td",null,"read")]),i("tr",null,[i("td",null,"setACL"),i("td",null,[s("设置节点的 ACL "),i("br"),s("需指定新 ACL 列表和预期版本号")]),i("td",null,"write")]),i("tr",null,[i("td",null,"sync"),i("td",null,[s("强制客户端与 Leader 节点同步数据视图，确保后续读取操作能获取最新写入的数据"),i("br"),s("通过异步方式完成，需通过回调确认完成")]),i("td",null,"read")])])],-1)),l[40]||(l[40]=i("h3",{id:"事件和监听器",tabindex:"-1"},[s("事件和监听器 "),i("a",{class:"header-anchor",href:"#事件和监听器","aria-label":'Permalink to "事件和监听器"'},"​")],-1)),l[41]||(l[41]=i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"事件类型"),i("th",null,"触发条件"),i("th",null,"注册方式")])]),i("tbody",null,[i("tr",null,[i("td",null,"NodeCreated"),i("td",null,"被监听的节点创建"),i("td",null,"exists")]),i("tr",null,[i("td",null,"NodeDeleted"),i("td",null,"被监听的节点删除"),i("td",null,"exists或getData")]),i("tr",null,[i("td",null,"NodeDataChanged"),i("td",null,"被监听节点的数据变更"),i("td",null,"exists或getData")]),i("tr",null,[i("td",null,"NodeChildrenChanged"),i("td",null,"被监听节点的子节点列表变更"),i("td",null,"getChildren")])])],-1)),l[42]||(l[42]=i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"API方法"),i("th",null,"可监听的事件类型"),i("th",null,"不可监听的事件类型")])]),i("tbody",null,[i("tr",null,[i("td",null,"exists"),i("td",null,"NodeCreated、NodeDeleted、NodeDataChanged"),i("td",null,"NodeChildrenChanged")]),i("tr",null,[i("td",null,"getData"),i("td",null,"NodeDataChanged、NodeDeleted"),i("td",null,"NodeCreated、NodeChildrenChanged")]),i("tr",null,[i("td",null,"getChildren"),i("td",null,"NodeChildrenChanged"),i("td",null,"NodeCreated、NodeDeleted、NodeDataChanged")])])],-1)),l[43]||(l[43]=i("h3",{id:"原生-api-演示",tabindex:"-1"},[s("原生 API 演示 "),i("a",{class:"header-anchor",href:"#原生-api-演示","aria-label":'Permalink to "原生 API 演示"'},"​")],-1)),l[44]||(l[44]=i("div",{class:"language-java max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"java"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 创建节点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"String path "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," zk."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"create"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'    "/demo"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 路径")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'    "data"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getBytes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(),  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 节点要存储的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ZooDefs.Ids.OPEN_ACL_UNSAFE,  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 无限制访问权限")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    CreateMode.PERSISTENT  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 持久节点，服务器重启后依然存在")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 删除节点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"zk."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"delete"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/demo"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");   "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// -1 表示不做版本检查")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 判断节点是否存在")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Stat stat "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," zk."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"exists"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/demo"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// true=注册默认 watcher")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 获取指定节点的所有子节点列表名称")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"List<"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"String"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> children "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," zk."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getChildren"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/demo"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"); "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// false=不监听")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 读取节点的数据内容和元数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"byte"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[] data "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," zk."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'    "/demo"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 要更新的节点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 不注册监听器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    null"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 不获取节点状态信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 更新节点数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," newVersion "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," zk."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'    "/demo"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 要更新的节点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'    "new"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getBytes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(),  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 新的节点数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 不检查版本，直接更新")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getVersion"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 返回更新后的版本号")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 获取 ACL 权限")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"List<"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ACL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> acls "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," zk."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getACL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/demo"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"new"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Stat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 同时获取节点状态")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 同步操作")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"zk."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sync"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/demo"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", (rc, path1, ctx) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"->"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // sync 完成后回调")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// null : 不额外传递上下文")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[45]||(l[45]=i("p",null,"核心概念",-1)),l[46]||(l[46]=i("ul",null,[i("li",null,[i("p",null,"state ：节点状态信息，包含版本、创建时间、数据长度等")]),i("li",null,[i("p",null,"watcher ：监听器，用于监听节点变化事件")]),i("li",null,[i("p",null,"ACL ：访问控制列表，控制节点的访问权限")]),i("li",null,[i("p",null,"版本：ZooKeeper 通过版本号保证数据一致性")]),i("li",null,[i("p",null,"异步操作：大多数 ZooKeeper 操作都支持异步执行，提高性能")])],-1)),l[47]||(l[47]=i("h2",{id:"实现",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现","aria-label":'Permalink to "实现"'},"​")],-1)),l[48]||(l[48]=i("h3",{id:"zxid",tabindex:"-1"},[s("Zxid "),i("a",{class:"header-anchor",href:"#zxid","aria-label":'Permalink to "Zxid"'},"​")],-1)),l[49]||(l[49]=i("p",null,"zxid 是一个 64 位的全局递增事务标识，用于保证事务的顺序一致性",-1)),l[50]||(l[50]=i("p",null,"高 32 位表示 epoch (Leader 周期)；低 32 位表示事务编号 (xid ，每个事务请求时递增)",-1)),l[51]||(l[51]=i("p",null,"每次 Leader 选举后，epoch 会加 1 ，低 32 位归零重新开始技术，从而确保 zxid 全局递增",-1)),l[52]||(l[52]=i("p",null,"ZooKeeper 通过 zxid 确保事务按顺序执行，读请求返回的结果会带有当前最新的 zxid ，保证读请求相对于更新有序",-1)),l[53]||(l[53]=i("h3",{id:"角色",tabindex:"-1"},[s("角色 "),i("a",{class:"header-anchor",href:"#角色","aria-label":'Permalink to "角色"'},"​")],-1)),l[54]||(l[54]=i("p",null,"根据是否改变系统状态来划分角色",-1)),l[55]||(l[55]=i("ul",null,[i("li",null,[i("p",null,"领导者 Leader"),i("ul",null,[i("li",null,[i("p",null,"处理所有的写请求（create、set、delete等）")]),i("li",null,[i("p",null,"转发读请求给自己或其他节点")]),i("li",null,[i("p",null,"协调集群中的事务处理")]),i("li",null,[i("p",null,"向Follower和Observer同步数据")]),i("li",null,[i("p",null,"发起Leader选举投票")])])]),i("li",null,[i("p",null,"学习者 Learner"),i("ul",null,[i("li",null,[i("p",null,"跟随者 Follower"),i("ul",null,[i("li",null,[i("p",null,"处理客户端的读请求")]),i("li",null,[i("p",null,"参与写操作的投票（需要过半数同意）")]),i("li",null,[i("p",null,"维护与Leader的心跳连接")]),i("li",null,[i("p",null,"从Leader同步数据更新")])])]),i("li",null,[i("p",null,"观察者 Observer"),i("p",null,[i("s",null,"边缘 OB (不是)")]),i("ul",null,[i("li",null,[i("p",null,"只处理读请求（不参与投票）")]),i("li",null,[i("p",null,"从Leader同步数据")]),i("li",null,[i("p",null,"用于扩展读性能，不影响投票效率")]),i("li",null,[i("p",null,"适合只读流量大的场景")])])])]),i("blockquote",null,[i("p",null,"Follower和Observer不能直接处理写请求，需转发给Leader")])]),i("li",null,[i("p",null,"客户端 Client"),i("ul",null,[i("li",null,[i("p",null,"连接到ZooKeeper集群")]),i("li",null,[i("p",null,"发起读写请求")]),i("li",null,[i("p",null,"接收响应和Watch事件通知")]),i("li",null,[i("p",null,"维护会话状态")])])])],-1)),d(r,p({code:"Z3JhcGggVEIKICAgIHN1YmdyYXBoICJab29LZWVwZXLpm4bnvqQiCiAgICAgICAgQVtMZWFkZXJdIAogICAgICAgIEJbRm9sbG93ZXJdCiAgICAgICAgQ1tGb2xsb3dlcl0gCiAgICAgICAgRFtPYnNlcnZlcl0KICAgICAgICAKICAgICAgICBBIC0tLSBCCiAgICAgICAgQSAtLS0gQwogICAgICAgIEEgLS0tIEQKICAgIGVuZAogICAgCiAgICBzdWJncmFwaCAi5a6i5oi356uvIgogICAgICAgIEVbQ2xpZW50MV0KICAgICAgICBGW0NsaWVudDJdCiAgICAgICAgR1tDbGllbnQzXQogICAgZW5kCiAgICAKICAgIEUgLS0tIEEKICAgIEYgLS0tIEIKICAgIEcgLS0tIEQKICAgIEUgLS0tIEMKICAgIEYgLS0tIEEKICAgIEcgLS0tIEIKICAgIAogICAgc3R5bGUgQSBmaWxsOiNmZjk5OTkKICAgIHN0eWxlIEIgZmlsbDojOTljY2ZmCiAgICBzdHlsZSBDIGZpbGw6Izk5Y2NmZgogICAgc3R5bGUgRCBmaWxsOiM5OWZmOTkKICAgIHN0eWxlIEUgZmlsbDojZmZmZjk5CiAgICBzdHlsZSBGIGZpbGw6I2ZmZmY5OQogICAgc3R5bGUgRyBmaWxsOiNmZmZmOTk"},{}),null,16),l[56]||(l[56]=i("h4",{id:"不同请求的处理",tabindex:"-1"},[s("不同请求的处理 "),i("a",{class:"header-anchor",href:"#不同请求的处理","aria-label":'Permalink to "不同请求的处理"'},"​")],-1)),l[57]||(l[57]=i("ul",null,[i("li",null,[i("p",null,"写请求"),i("p",null,"所有写请求由领导者处理。领导者生成提议 Proposal ，并将其广播给所有追随者。"),i("p",null,"追随者接收提议后返回 ACK 给领导者。"),i("p",null,"领导者收到超过半数的确认时，提交该提议，并通知所有追随者应用变更")]),i("li",null,[i("p",null,"读请求"),i("p",null,"读请求可以由任何追随者处理，提供高吞吐，低延迟")]),i("li",null,[i("p",null,"选举机制"),i("p",null,"领导者故障时，或集群启动时，ZK 使用基于 ZAB 协议的选举算法来选举新的领导者"),i("p",null,"选举过程确保在任何时刻只有一个活跃的领导者")])],-1)),l[58]||(l[58]=i("h3",{id:"zab-协议",tabindex:"-1"},[s("ZAB 协议 "),i("a",{class:"header-anchor",href:"#zab-协议","aria-label":'Permalink to "ZAB 协议"'},"​")],-1)),l[59]||(l[59]=i("p",null,"Zookeeper Atomic Broadcase ，原子广播协议",-1)),l[60]||(l[60]=i("p",null,[s("进行集群间主备节点的数据同步，保证数据的一致性，构建"),i("strong",null,"对等集群"),s("，用于防止单点故障。任何一台服务器宕机都不影响客户端正常使用。")],-1)),l[61]||(l[61]=i("p",null,"本质是一种两阶段一致性复制机制",-1)),l[62]||(l[62]=i("figure",null,[i("img",{src:"https://s2.loli.net/2025/12/12/VnpY1S4DytBPHTu.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),l[63]||(l[63]=i("ul",null,[i("li",null,[i("p",null,"阶段一领导者选举：集群启动，或领导者故障")]),i("li",null,[i("p",null,"阶段二源自广播：同步结果状态")])],-1)),l[64]||(l[64]=i("h4",{id:"选举投票机制",tabindex:"-1"},[s("选举投票机制 "),i("a",{class:"header-anchor",href:"#选举投票机制","aria-label":'Permalink to "选举投票机制"'},"​")],-1)),l[65]||(l[65]=i("p",null,"当旧 Leader 失效时，检测到 Leader 失效的 Follower 或 Observer 自动进入 looking 状态并发起选举",-1)),l[66]||(l[66]=i("figure",null,[i("img",{src:"https://s2.loli.net/2025/12/12/IfEr4PLKj2XSu5D.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),l[67]||(l[67]=i("p",null,"选举流程",-1)),d(r,p({code:"c2VxdWVuY2VEaWFncmFtCiAgICBwYXJ0aWNpcGFudCBTZXJ2ZXIxCiAgICBwYXJ0aWNpcGFudCBTZXJ2ZXIyCiAgICBwYXJ0aWNpcGFudCBTZXJ2ZXIzCiAgICAKICAgIE5vdGUgb3ZlciBTZXJ2ZXIxLFNlcnZlcjM6IOmbhue-pOWQr-WKqO-8jOmAieS4vuW8gOWniwogICAgCiAgICBTZXJ2ZXIxLT4-U2VydmVyMjog5oqV56WoKFNlcnZlcjEsIFp4aWQ9MHgxMDAwMDAwMDEpCiAgICBTZXJ2ZXIxLT4-U2VydmVyMzog5oqV56WoKFNlcnZlcjEsIFp4aWQ9MHgxMDAwMDAwMDEpCiAgICAKICAgIFNlcnZlcjItPj5TZXJ2ZXIxOiDmipXnpagoU2VydmVyMiwgWnhpZD0weDEwMDAwMDAwMikgICMg5pWw5o2u5pu05pawCiAgICBTZXJ2ZXIyLT4-U2VydmVyMzog5oqV56WoKFNlcnZlcjIsIFp4aWQ9MHgxMDAwMDAwMDIpCiAgICAKICAgIFNlcnZlcjMtPj5TZXJ2ZXIxOiDmipXnpagoU2VydmVyMiwgWnhpZD0weDEwMDAwMDAwMikgICMg6K6k5ZCMU2VydmVyMgogICAgU2VydmVyMy0-PlNlcnZlcjI6IOaKleelqChTZXJ2ZXIyLCBaeGlkPTB4MTAwMDAwMDAyKQogICAgCiAgICBOb3RlIG92ZXIgU2VydmVyMSxTZXJ2ZXIzOiBTZXJ2ZXIy6I635b6X5aSa5pWw56Wo77yM5oiQ5Li6TGVhZGVy"},{}),null,16),l[68]||(l[68]=i("p",null,"比较规则",-1)),l[69]||(l[69]=i("div",{class:"language- max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"}),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"1. 首先比较 ZXID（事务ID）：ZXID大的服务器数据更新，优先选为Leader")]),s(`
`),i("span",{class:"line"},[i("span",null,"2. ZXID相同时比较 Server ID：ID大的服务器优先选为Leader")]),s(`
`),i("span",{class:"line"},[i("span",null,"3. 保证数据不丢失的前提下，选择ID最大的服务器")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[70]||(l[70]=i("h4",{id:"数据同步机制",tabindex:"-1"},[s("数据同步机制 "),i("a",{class:"header-anchor",href:"#数据同步机制","aria-label":'Permalink to "数据同步机制"'},"​")],-1)),l[71]||(l[71]=i("figure",null,[i("img",{src:"https://s2.loli.net/2025/12/12/jP2cVXwbBRye4uW.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),l[72]||(l[72]=i("p",null,"如果客户端连接到的不是 Leader ，那么发出的写请求会被先转发给 Leader ，再分发给各 Follower",-1)),l[73]||(l[73]=i("h4",{id:"顺序一致性机制",tabindex:"-1"},[s("顺序一致性机制 "),i("a",{class:"header-anchor",href:"#顺序一致性机制","aria-label":'Permalink to "顺序一致性机制"'},"​")],-1)),l[74]||(l[74]=i("figure",null,[i("img",{src:"https://s2.loli.net/2025/12/12/IjwLCqJWD2KdaG7.png",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),l[75]||(l[75]=i("p",null,"Leader 为每个 Follower 创建一个队列，发送 proposal 时，会向该队列中发送",-1)),l[76]||(l[76]=i("h2",{id:"curator",tabindex:"-1"},[s("curator "),i("a",{class:"header-anchor",href:"#curator","aria-label":'Permalink to "curator"'},"​")],-1)),l[77]||(l[77]=i("p",null,"封装ZooKeeper客户端与服务器之间的连接处理，提供了一套Fluent风格的操作API ，提供各种应用场景（如分布式锁）的抽象封装",-1)),l[78]||(l[78]=i("ul",null,[i("li",null,[i("p",null,"curator-framework"),i("p",null,"对ZooKeeper的底层API进行封装，提供高级API简化ZooKeeper使用，包括自动连接管理（如重连和重试机制）、简化原始ZooKeeper方法及事件，并提供Fluent API接口")]),i("li",null,[i("p",null,"curator-client"),i("p",null,"提供客户端操作功能，例如重试策略（如ExponentialBackoffRetry、RetryNTimes等）")]),i("li",null,[i("p",null,"curator-recipes"),i("p",null,"封装ZooKeeper的高级特性，实现典型应用场景（Recipes），如Cache事件监听、分布式锁、选举、分布式计数器、分布式屏障（Barrier）等")]),i("li",null,[i("p",null,"其他模块"),i("p",null,"（如 curator-x-async）提供异步操作能力")])],-1)),l[79]||(l[79]=i("h3",{id:"特性演示",tabindex:"-1"},[s("特性演示 "),i("a",{class:"header-anchor",href:"#特性演示","aria-label":'Permalink to "特性演示"'},"​")],-1)),l[80]||(l[80]=i("div",{class:"language-java max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"java"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 重试策略 & 客户端启动")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 指数退避重试策略，初始间隔 1 秒，最多重试 3 次")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"RetryPolicy retry "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ExponentialBackoffRetry"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"CuratorFramework client "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CuratorFrameworkFactory")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"builder"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"connectString"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"zk1:2181,zk2:2181,zk3:2181"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 集群地址")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sessionTimeoutMs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"60_000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 会话超时时间 60 秒")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"retryPolicy"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(retry)  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 设置重试策略")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"namespace"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"demo"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 所有操作会在 /demo 下进行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"build"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"client."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[81]||(l[81]=i("div",{class:"language-java max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"java"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 节点CRUD（链式 Fluent API）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"String path "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "/config/app1"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 创建（递归父节点、初始数据）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"client."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"create"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"creatingParentsIfNeeded"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      ."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"withMode"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(CreateMode.PERSISTENT)  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 使用持久节点模式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      ."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"forPath"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(path, "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"v1"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getBytes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 初始数据")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 读取")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"byte"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[] data "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," client."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"forPath"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(path);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"System.out."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"value = "'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," String"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(data));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 更新")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"client."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"forPath"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(path, "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"v2"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getBytes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 删除（递归）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"client."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"delete"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"deletingChildrenIfPathNeeded"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"forPath"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(path);")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[82]||(l[82]=i("div",{class:"language-java max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"java"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// NodeCache单节点内容监听")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 监听 /config/timeout 节点的变化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"NodeCache nodeCache "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," NodeCache"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(client, "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/config/timeout"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 添加监听器，当节点数据发生变化时触发")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"nodeCache."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getListenable"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"addListener"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(() "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"->"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 获取当前节点数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ChildData current "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," nodeCache."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getCurrentData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (current "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        System.out."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"timeout 最新值 = "'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," String"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(current."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"});")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 启动监听器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"nodeCache."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[83]||(l[83]=i("div",{class:"language-java max-h-900px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"java"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 领导选举（Leader Latch）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 在 /leaders 路径下选举，当前实例标识为 instance-A")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"LeaderLatch latch "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LeaderLatch"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(client, "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/leaders"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"instance-A"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 添加选举状态监听器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"latch."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"addListener"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"new"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LeaderLatchListener"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," isLeader"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        System.out."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"我成为 leader，开始调度任务"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 在这里执行只有 Leader 才能执行的任务")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," notLeader"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        System.out."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"我失去 leader 身份，停止任务"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 停止相关的任务执行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"});")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 启动选举过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"latch."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[84]||(l[84]=i("h3",{id:"代码演示",tabindex:"-1"},[s("代码演示 "),i("a",{class:"header-anchor",href:"#代码演示","aria-label":'Permalink to "代码演示"'},"​")],-1)),l[85]||(l[85]=i("p",null,[s("见 "),i("a",{href:"https://github.com/liyuier/zhuawa-zookeeper-curator",target:"_blank",rel:"noreferrer"},"https://github.com/liyuier/zhuawa-zookeeper-curator")],-1))]),"main-header":a(()=>[t(n.$slots,"main-header")]),"main-header-after":a(()=>[t(n.$slots,"main-header-after")]),"main-nav":a(()=>[t(n.$slots,"main-nav")]),"main-content-before":a(()=>[t(n.$slots,"main-content-before")]),"main-content":a(()=>[t(n.$slots,"main-content")]),"main-content-after":a(()=>[t(n.$slots,"main-content-after")]),"main-nav-before":a(()=>[t(n.$slots,"main-nav-before")]),"main-nav-after":a(()=>[t(n.$slots,"main-nav-after")]),comment:a(()=>[t(n.$slots,"comment")]),footer:a(()=>[t(n.$slots,"footer")]),aside:a(()=>[t(n.$slots,"aside")]),"aside-custom":a(()=>[t(n.$slots,"aside-custom")]),default:a(()=>[t(n.$slots,"default")]),_:3},8,["frontmatter"])}}};export{O as default,Z as usePageData};
